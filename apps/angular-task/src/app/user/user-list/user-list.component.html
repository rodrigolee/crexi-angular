<div class="search-container">
  <mat-form-field appearance="outline">
    <mat-label>Search Users</mat-label>
    <input [formControl]="searchQuery" matInput placeholder="Type to search..." data-testid="search-input" />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>
</div>
<div class="card-container">
  @for (user of filteredUsers(); track user.id) {
  <mat-card
    appearance="outlined" class="card" data-testid="user-card">
    <mat-card-header>
      <mat-card-title>
        <a [routerLink]="[user.id]" class="user-link">{{ user.name }}</a>
      </mat-card-title>
      <mat-card-subtitle>{{ user.username }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <p>
        <b>Email:</b> <a class="info-link" href="mailto:{{ user.email }}"> {{ user.email }}</a>
      </p>
      <p><b>Address:</b> {{ user.address }}</p>
      <p>
        <b>Phone:</b> <a class="info-link" href="tel:{{ user.phone }}"> {{ user.phone }}</a>
      </p>
      <p><b>Website:</b> {{ user.website }}</p>
      <p><b>Company:</b> {{ user.company }}</p>
    </mat-card-content>

    <mat-card-actions align="end">

      <button [routerLink]="[user.id]" color="primary" mat-stroked-button data-testid="details-button">View Details</button>
      <button (click)="toggleFavorite(user.id)" color="accent" mat-flat-button data-testid="favorite-button">{{ user.isFavorite ? 'Unfavorite' :
        'Favorite' }}</button>
    </mat-card-actions>
  </mat-card>
  }
</div>